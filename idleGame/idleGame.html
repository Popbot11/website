<html>
    <head>
        <style>

        </style>
        <script>
            // e_ vars are elements 
            // i_ functions corrospond to things happen only if certain requirements are met
            
            let clicks = {
                normal: 0,
                water: 0,
                fire: 0,
                lightning: 0,
                poison: 0,
                spirit: 0
            }
            class Item {
                constructor(price, diplay_threshold, name, quantity = 0){
                    this.price = price;
                    this.diplay_threshold = diplay_threshold;
                    this.name = name;
                    this.quantity = quantity;
                }
            }
            let items = {
                'double_click': new Item(10, 10, "double click"),
                'auto_toggle': new Item(50, 10, "auto toggle"),
            }
            function purchase_item(name){
                if (clicks.normal >= items[name].price){
                    items[name].quantity += 1;
                    clicks.normal -= items[name].price;
                    console.log("purchased item: "+name)
                    update_ui();
                    update_counter();
                }
            }   

            function update_counter(){
                console.log("drawing counter")
                var e_counter = document.getElementById("counter");
                e_counter.innerText = clicks.normal;
            }
            function update_ui(){
                console.log("----UPDATE UI----")

                console.log("drawing shop")
                var e_shop = document.getElementById("shop");
                e_shop.innerHTML = ""
                for (var item in items){
                    let e_item_ui = document.createElement("span")
                    e_item_ui.innerText += "$T"+items[item].price + ", "+items[item].name+", "+items[item].quantity+"\n";

                    let e_button = document.createElement("button");
                    console.log("\tmaking button: "+item)
                    e_button.onclick = function(){
                        purchase_item(this.id);
                    }
                    e_button.id = item;
                    e_button.innerText = "buy"
                    
                    e_shop.appendChild(e_button);
                    e_shop.appendChild(e_item_ui);
                }
            
                console.log("-----------------")
                
            }

            function i_double_click(){
                clicks.normal += items['double_click'].quantity;                 
            }
   
            function button_click() {
                clicks.normal += 1;
                i_double_click(); //multiplies click power by two

                //IMPORTANT: MAKE THIS THRESHOLD 50 FOR ACTUAL THING
                if (clicks.normal == 10){
                    update_ui();
                }

                update_counter();
            }

            

            
            
        </script>
    </head>
    <body>
        <div id="canvas">
            <button onclick="button_click()"><h2>click</h2></button><br>
            <span id="counter"></span>
            <div id="shop"></div>
        </div>
    </body>
</html>